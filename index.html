<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Kya Hai Mahaul - App</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-database-compat.js"></script>
  <style>
    body { margin: 0; font-family: Arial; background: #000; color: #fff; }
    nav {
      background: #111;
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      padding: 10px;
    }
    nav button {
      background: #e50914;
      color: white;
      border: none;
      padding: 10px 15px;
      margin: 5px;
      border-radius: 6px;
      font-weight: bold;
      cursor: pointer;
    }
    section { display: none; padding: 20px; }
    section.active { display: block; }
    iframe {
      width: 100%;
      height: 280px;
      margin-bottom: 15px;
      border: none;
      border-radius: 10px;
    }
    img.thumb {
      width: 100%;
      border-radius: 10px;
      margin-bottom: 10px;
    }
    .desc-list li, .home-news li {
      margin: 5px 0;
      padding: 8px;
      background: #111;
      border-radius: 5px;
    }
    .share-btn {
      background: #1db954;
      padding: 12px 20px;
      color: white;
      border: none;
      border-radius: 6px;
      font-size: 16px;
      cursor: pointer;
    }
  </style>
</head>
<body>

  <nav id="navbar">
    <button onclick="showPage('home')">Home</button>
    <button onclick="showPage('video')">Video</button>
    <button onclick="showPage('short')">Short</button>
    <button onclick="showPage('description')">Description</button>
    <button onclick="showPage('share')">Share</button>
  </nav>

  <section id="home">
    <h2>üì∞ Mahaul News</h2>
    <div id="homeContent"></div>
  </section>

  <section id="video">
    <h2>üé¨ Mahaul Videos</h2>
    <div id="videoList"></div>
  </section>

  <section id="short">
    <h2>üéûÔ∏è Short Videos</h2>
    <div id="shortList"></div>
  </section>

  <section id="description">
    <h2>üìù Descriptions</h2>
    <ul class="desc-list" id="descList"></ul>
  </section>

  <section id="share">
    <h2>üì§ Share this App</h2>
    <button class="share-btn" onclick="shareApp()">Share App</button>
  </section>

  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyBISasRnfZD0Y0UgAZDoTJ2SV2TwvzlDrM",
      authDomain: "kyahaimahaul-e4551.firebaseapp.com",
      databaseURL: "https://kyahaimahaul-e4551-default-rtdb.firebaseio.com",
      projectId: "kyahaimahaul-e4551",
      storageBucket: "kyahaimahaul-e4551.appspot.com",
      messagingSenderId: "69916634629",
      appId: "1:69916634629:web:60cf5433aaed97bf12766c"
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.database().ref("mahaulApp");

    function showPage(id) {
      document.querySelectorAll("section").forEach(sec => sec.classList.remove("active"));
      document.getElementById(id).classList.add("active");
    }

    function loadApp() {
      db.on("value", snap => {
        const data = snap.val() || {};

        // Home
        const homeBox = document.getElementById("homeContent");
        homeBox.innerHTML = (data.home || []).reverse().map(item => `
          <img class="thumb" src="${item.thumb}" />
          <ul class="home-news"><li>${item.news}</li></ul>
        `).join("");

        // Videos
        const videoBox = document.getElementById("videoList");
        videoBox.innerHTML = (data.video || []).reverse().map(link =>
          `<iframe src="https://www.youtube.com/embed/${extractId(link)}" allowfullscreen></iframe>`
        ).join("");

        // Shorts
        const shortBox = document.getElementById("shortList");
        shortBox.innerHTML = (data.short || []).reverse().map(link =>
          `<iframe src="https://www.youtube.com/embed/${extractId(link)}" allowfullscreen></iframe>`
        ).join("");

        // Descriptions
        const descBox = document.getElementById("descList");
        descBox.innerHTML = (data.description || []).reverse().map(text =>
          `<li>${text}</li>`
        ).join("");
      });
    }

    function extractId(url) {
      const match = url.match(/(?:v=|\/)([0-9A-Za-z_-]{11})(?:\?|&|$)/);
      return match ? match[1] : url.split("youtu.be/")[1];
    }

    function shareApp() {
      const shareData = {
        title: "Kya Hai Mahaul App",
        text: "Check out the Kya Hai Mahaul news app!",
        url: window.location.href
      };
      if (navigator.share) {
        navigator.share(shareData).catch(err => console.log(err));
      } else {
        alert("Copy this URL: " + window.location.href);
      }
    }

    loadApp();
    showPage("home");
  </script>

</body>
</html>
